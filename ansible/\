---
# Upload new openvz template with all options and force overwrite
- name: Download debian 10 iso
  get_url:
    url: https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-10.3.0-amd64-netinst.iso
    dest: ./debian10.iso

- name: Upload iso to proxmox
  proxmox_template:
    node: "{{ proxmox.node }}" 
    api_user: "{{ proxmox.user }}"
    api_password: "{{ proxmox.password }}"
    api_host: "{{ target }}" 
    storage: "{{ proxmox.storage }}" 
    content_type: iso 
    src: "{{ proxmox.file }}" 
    force: yes

- name: Download pfsense iso
  get_url:
    url: https://nyifiles.pfsense.org/mirror/downloads/pfSense-CE-2.4.4-RELEASE-p3-amd64.iso.gz
    dest: ./pfsense.iso

- name: Upload pfsense iso to proxmox
  proxmox_template:
    node: "{{ proxmox.node }}" 
    api_user: "{{ proxmox.user }}"
    api_password: "{{ proxmox.password }}"
    api_host: "{{ target }}" 
    storage: "{{ proxmox.storage }}" 
    content_type: iso 
    src: ./pfsense.iso 
    force: yes


