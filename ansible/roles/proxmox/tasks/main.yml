---
# tasks file for proxmox

- import_tasks: configure_node.yml
  tags:
    - proxmox
    - network
    - config
    - system
    - interfaces
  when: pfsense_conf_opt == 'yes'

- import_tasks: install_proxmox.yml
  tags:
    - install
    - proxmox
    - system
  when: install_proxmox_opt == 'yes'

- import_tasks: create_cluster.yml
  tags:
    - proxmox
    - cluster
    - create
  when: create_cluster_opt == 'yes'

- import_tasks: manage_groups.yml
  tags:
    - proxmox
    - create-groups
  when: manage_groups_opt == 'yes'

- import_tasks: manage_users.yml
  tags:
    - proxmox
    - create-user
  when: manage_users_opt == 'yes'

- import_tasks: upload_iso.yml
  tags:
    - upload
    - iso
    - proxmox
    - system
  when: upload_iso_opt == 'yes'

- import_tasks: create_vm.yml
  tags:
    - vm
    - create
    - proxmox
    - system
  when: create_vm_opt == 'yes'

- import_tasks: add_to_cluster.yml
  tags:
    - proxmox
    - add-node-cluster
    - system
  when: add_to_cluster_opt == 'yes'

- import_tasks: add_firewall_rule.yml
  tags:
    - proxmox
    - firewall
  when: add_firewall_rule_opt == 'yes'

- import_tasks: create_vm_from_backup.yml
  tags:
    - proxmox
    - create_vm
    - restore_backup
  when: create_vm_from_backup_opt == 'yes'

- import_tasks: configure_ssl_letsencrypt.yml
  tags:
    - proxmox
    - create_ssl_cert
    - certbot
  when: create_ssl_certificate_opt == 'yes'

- import_tasks: configure_common_vm.yml
  tags:
    - proxmox
    - configure
    - vm
  when: configure_common_vm_opt == 'yes'